#ifndef OV5695_H
#define OV5695_H

#define CHIP_ID            0x005695
#define OV5695_REG_CHIP_ID 0x300a

#define OV5695_REG_CTRL_MODE   0x0100
#define OV5695_MODE_SW_STANDBY 0x0
#define OV5695_MODE_STREAMING  BIT(0)

#define OV5695_REG_SC_MIPI_SC_CTRL  0x3016
#define OV5695_MIPI_SC_CTRL_PHY_RTS BIT(1) /*!< Reset PHY when rst_sync */
#define OV5695_MIPI_SC_CTRL_MIPI_EN BIT(4) /*!< Enable MIPI */
#define OV5695_MIPI_SC_CTRL_TWOLANE BIT(5)
#define OV5695_MIPI_SC_CTRL_ONELANE 0x00

#define OV5695_REG_EXPOSURE  0x3500
#define OV5695_EXPOSURE_MIN  4
#define OV5695_EXPOSURE_STEP 1
#define OV5695_VTS_MAX       0x7fff

#define OV5695_REG_AEC_MANUAL         0x3503
#define OV5695_AEC_GAIN_FORMAT_REAL   0x00
#define OV5695_AEC_GAIN_FORMAT_SENSOR BIT(2)
#define OV5695_AEC_GAIN_PREC16_EN     BIT(3)

#define OV5695_REG_ANALOG_GAIN_HI              0x3508
#define OV5695_REG_ANALOG_GAIN_LOW             0x3509
#define OV5695_REG_ANALOG_GAIN_HI_MASK         0x1F
#define OV5695_REG_ANALOG_GAIN_LOW_COARSE_MASK 0x70
#define ANALOG_GAIN_MIN                        0x10
#define ANALOG_GAIN_MAX                        0xf8
#define ANALOG_GAIN_STEP                       1
#define ANALOG_GAIN_DEFAULT                    0xf8

/** Maximum analogue gain 2x + (1 + 15/16) = ~3x */
#define OV5695_GAIN_A_MAX_WITH_FRACT \
    (u32)((1.9375) * (1 << SENSOR_FIX_FRACBITS))

/** Maximum digital gain 16x + (1 + 15/16) = ~18x */
#define OV5695_GAIN_D_MAX_WITH_FRACT \
    (u32)((17.9375) * (1 << SENSOR_FIX_FRACBITS))

#define OV5695_REG_LONG_EXPO_H   0x3501
#define OV5695_REG_LONG_EXPO_L   0x3502
#define OV5695_REG_DIGI_GAIN_H   0x350a
#define OV5695_REG_DIGI_GAIN_L   0x350b
#define OV5695_DIGI_GAIN_L_MASK  0x3f
#define OV5695_DIGI_GAIN_H_SHIFT 6
#define OV5695_DIGI_GAIN_MIN     0
#define OV5695_DIGI_GAIN_MAX     (0x4000 - 1)
#define OV5695_DIGI_GAIN_STEP    1
#define OV5695_DIGI_GAIN_DEFAULT 1024

#define OV5695_REG_TIMING_X_START       0x3800
#define OV5695_REG_TIMING_Y_START       0x3802
#define OV5695_REG_TIMING_X_END         0x3804
#define OV5695_REG_TIMING_Y_END         0x3806
#define OV5695_REG_TIMING_X_OUTPUT_SIZE 0x3808
#define OV5695_REG_TIMING_Y_OUTPUT_SIZE 0x380a
#define OV5695_REG_TIMING_HTS           0x380c
#define OV5695_REG_TIMING_VTS           0x380e
#define OV5695_REG_TIMING_ISP_X_WIN     0x3810
#define OV5695_REG_TIMING_ISP_Y_WIN     0x3812
#define OV5695_REG_TIMING_X_ODD_INC     0x3814
#define OV5695_REG_TIMING_X_EVEN_INC    0x3815
#define OV5695_REG_TIMING_Y_ODD_INC     0x382a
#define OV5695_REG_TIMING_Y_EVEN_INC    0x382b

#define OV5695_REG_BLC_CTRL00         0x4000
#define OV5695_REG_BLC_MEDIAN_EN      BIT(0)
#define OV5695_REG_BLC_DITHER_EN      BIT(1)
#define OV5695_REG_BLC_COMPENSATE_EN  BIT(2)
#define OV5695_REG_BLC_TARGET_ADJ_DIS BIT(3)
#define OV5695_REG_BLC_RESET_TRIGGER  BIT(4)
#define OV5695_REG_BLC_GAIN_TRIG_PRI  BIT(5)
#define OV5695_REG_BLC_CTRL00_DEFAULT                      \
    (OV5695_REG_BLC_MEDIAN_EN | OV5695_REG_BLC_DITHER_EN | \
     OV5695_REG_BLC_RESET_TRIGGER | OV5695_REG_BLC_GAIN_TRIG_PRI)

#define OV5695_REG_BLC_CTRL00 0x4000
#define OV5695_REG_BLC_CTRL01 0x4001
#define OV5695_REG_BLC_CTRL02 0x4002
#define OV5695_REG_BLC_CTRL03 0x4003
#define OV5695_REG_BLC_CTRL04 0x4004
#define OV5695_REG_BLC_CTRL05 0x4005
#define OV5695_REG_BLC_CTRL06 0x4006
#define OV5695_REG_BLC_CTRL07 0x4007
#define OV5695_REG_BLC_CTRL08 0x4008
#define OV5695_REG_BLC_CTRL09 0x4009

#define OV5695_REG_SYNC_REG0 0x4501
#define OV5695_REG_SYNC_REG1 0x4501

#define OV5695_REG_TEST_PATTERN     0x4503
#define OV5695_TEST_PATTERN_ENABLE  BIT(7)
#define OV5695_TEST_PATTERN_DISABLE 0x0

#define OV5695_REG_ISP_CTRL00             0x5000
#define OV5695_REG_ISP_CTRL00_BLC_EN      BIT(0)
#define OV5695_REG_ISP_CTRL00_WC_EN       BIT(1)
#define OV5695_REG_ISP_CTRL00_BC_EN       BIT(2)
#define OV5695_REG_ISP_CTRL00_AWB_GAIN_EN BIT(4)
#define OV5695_REG_ISP_CTRL00_BLC_HDR_EN  BIT(7)
#define OV5695_REG_ISP_CTRL00_DEFAULT                             \
    (OV5695_REG_ISP_CTRL00_BLC_EN | OV5695_REG_ISP_CTRL00_WC_EN | \
     OV5695_REG_ISP_CTRL00_BC_EN | OV5695_REG_ISP_CTRL00_AWB_GAIN_EN)

#define OV5695_REG_ISP_CTRL01            0x5001
#define OV5695_REG_ISP_CTRL01_LATCH_EN   BIT(0)
#define OV5695_REG_ISP_CTRL01_AWB_EN     BIT(1)
#define OV5695_REG_ISP_CTRL01_OTP_DPC_EN BIT(3)
#define OV5695_REG_ISP_CTRL01_DEFAULT    0xC0 OV5695_REG_ISP_CTRL01_AWB_EN

#define OV5695_REG_ISP_D_GAIN_LONG      0x5012   // ISP CTRL12
#define OV5695_REG_ISP_D_GAIN_SHORT     0x5014   // ISP CTRL14
#define OV5695_REG_ISP_RED_GAIN_LONG    0x5019   // ISP CTRL19
#define OV5695_REG_ISP_GREEN_GAIN_LONG  0x501B   // ISP CTRL1B
#define OV5695_REG_ISP_BLUE_GAIN_LONG   0x501D   // ISP CTRL1D
#define OV5695_REG_ISP_RED_GAIN_SHORT   0x501f   // ISP CTRL1F
#define OV5695_REG_ISP_GREEN_GAIN_SHORT 0x5021   // ISP CTRL21
#define OV5695_REG_ISP_BLUE_GAIN_SHORT  0x5023   // ISP CTRL23

#define OV5695_REG_VTS 0x380e

#endif   // OV5695_H
